## API Report File for "@liquidrazor/rtsk"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

// @public
export function createStream<TRequest, TRaw, TResponse>(definition: StreamDefinition<TRequest, TRaw, TResponse>): StreamController<TRequest, TResponse>;

// @public
export interface NdjsonStreamDefinition<TRequest, TRaw, TResponse> extends StreamBaseConfig<TRequest, TRaw, TResponse> {
    mode: "ndjson";
}

// @public
export class NdjsonTransport<TRaw = unknown> implements Transport<TRaw> {
    constructor(config: NdjsonTransportConfig);
    // (undocumented)
    connect(handlers: TransportHandlers<TRaw>, options?: TransportConnectOptions): void;
    // (undocumented)
    disconnect(): void;
}

// @public
export type NdjsonTransportConfig = {
    endpoint: string;
    headers?: Record<string, string>;
    query?: Record<string, string | number | boolean | null | undefined>;
    timeoutMs?: number;
};

// @public
export type RequestMapper<TRequest> = (request: TRequest) => unknown;

// @public
export type ResponseHydrator<TRaw, TResponse> = (raw: TRaw) => TResponse;

// @public
export class RTSKError extends Error {
    constructor(details: RTSKErrorDetails);
    readonly cause?: unknown;
    readonly kind: RTSKErrorKind;
    readonly statusBefore?: RTSKStatus;
}

// @public
export interface RTSKErrorDetails {
    cause?: unknown;
    kind: RTSKErrorKind;
    message: string;
    statusBefore?: RTSKStatus;
}

// @public
export type RTSKErrorKind = "transport" | "hydrate" | "protocol" | "internal";

// @public
export type RTSKStatus = "idle" | "connecting" | "streaming" | "completed" | "error" | "stopped";

// @public
export interface SseExtraConfig {
    retryIntervalMs?: number;
    withCredentials?: boolean;
}

// @public
export interface SseStreamDefinition<TRequest, TRaw, TResponse> extends StreamBaseConfig<TRequest, TRaw, TResponse> {
    mode: "sse";
    sseOptions?: SseExtraConfig;
}

// @public
export class SseTransport<TRaw = unknown> implements Transport<TRaw> {
    constructor(config: SseTransportConfig);
    // (undocumented)
    connect(handlers: TransportHandlers<TRaw>): void;
    // (undocumented)
    disconnect(): void;
}

// @public
export type SseTransportConfig = {
    endpoint: string;
    query?: Record<string, string | number | boolean | null | undefined>;
    withCredentials?: boolean;
    retryIntervalMs?: number;
};

// @public
export interface StreamBaseConfig<TRequest, TRaw, TResponse> {
    endpoint: string;
    meta?: Record<string, unknown>;
    mode: StreamMode;
    requestMapper?: RequestMapper<TRequest>;
    responseHydrator: ResponseHydrator<TRaw, TResponse>;
    transportOptions?: {
        headers?: Record<string, string>;
        query?: Record<string, string | number | boolean | null | undefined>;
        timeoutMs?: number;
    };
}

// @public
export interface StreamController<TRequest = unknown, TResponse = unknown> {
    getStatus(): RTSKStatus;
    isActive(): boolean;
    start(request?: TRequest): void;
    stop(): void;
    subscribe(handlers: StreamEventHandlers<TResponse>): StreamSubscription;
}

// @public
export type StreamDefinition<TRequest, TRaw, TResponse> = NdjsonStreamDefinition<TRequest, TRaw, TResponse> | SseStreamDefinition<TRequest, TRaw, TResponse> | WebsocketStreamDefinition<TRequest, TRaw, TResponse>;

// @public
export interface StreamEventHandlers<TResponse> {
    onComplete?(): void;
    onError?(error: RTSKError): void;
    onNext?(value: TResponse): void;
    onStatusChange?(status: RTSKStatus): void;
}

// @public
export type StreamMode = "ndjson" | "sse" | "websocket";

// @public
export interface StreamSubscription {
    unsubscribe(): void;
}

// @public
export interface Transport<TRaw = unknown> {
    connect(handlers: TransportHandlers<TRaw>, options?: TransportConnectOptions): void;
    disconnect(): void;
    send?(data: unknown): void;
}

// @public
export interface TransportConnectOptions {
    payload?: unknown;
    signal?: AbortSignal | null;
}

// @public
export interface TransportHandlers<TRaw> {
    onComplete(): void;
    onError(error: RTSKError): void;
    onRaw(raw: TRaw): void;
}

// @public
export interface WebsocketExtraConfig {
    autoReconnect?: boolean;
    protocols?: string[];
    reconnectDelayMs?: number;
}

// @public
export interface WebsocketStreamDefinition<TRequest, TRaw, TResponse> extends StreamBaseConfig<TRequest, TRaw, TResponse> {
    mode: "websocket";
    wsOptions?: WebsocketExtraConfig;
}

// @public
export class WebsocketTransport<TRaw = unknown> implements Transport<TRaw> {
    constructor(config: WebsocketTransportConfig);
    // (undocumented)
    connect(handlers: TransportHandlers<TRaw>): void;
    // (undocumented)
    disconnect(): void;
    // (undocumented)
    send(data: unknown): void;
}

// @public
export type WebsocketTransportConfig = {
    endpoint: string;
    query?: Record<string, string | number | boolean | null | undefined>;
    protocols?: string[];
    autoReconnect?: boolean;
    reconnectDelayMs?: number;
};

```
